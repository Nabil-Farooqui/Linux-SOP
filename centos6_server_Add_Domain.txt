Refer Link:-
https://www.server-world.info/en/note?os=CentOS_6&p=adcli

#### Check Packages are install or not #####
# rpm -qa | grep adcli
# rpm -qa | grep sssd 
# rpm -qa | grep authconfig
# rpm -qa | grep pam_krb5
# rpm -qa | grep samba4-common

#### If Packages are not install then install above packages.####
# yum -y install adcli sssd authconfig pam_krb5 samba4-common

--now edit /etc/hosts file
# vim /etc/hosts
# 192.168.x.x    adserver.example.com  adserver	(activedirectory server hostname)

##### Check DNS IP's #####
# more /etc/resolv.conf
#Generated by NetworkManager
nameserver 192.168.2.200

#### Add DNS IP.#####
# nmtui

#### Restart network service####
# service network restart

#### Chech DNS IP's #####
# more /etc/resolv.conf
#Generated by NetworkManager
nameserver 192.168.2.200
nameserver 192.168.2.201

#### change Authentication Provider ####
# authconfig  --enablekrb5  --krb5kdc=sskikt_nt.com  --krb5adminserver=sskikt_nt.com --krb5realm=SSKIKT_NT.COM  --enablesssd  --enablesssdauth  --update

#### # make sure Active Directory domain info ####
# adcli info sskikt_nt.com
[domain]
domain-name = sskikt_nt.com
domain-short = SSKIKT_NT
domain-forest = sskikt_nt.com
domain-controller = SHAREKHANDC.sskikt_nt.com
domain-controller-site = Default-First-Site-Name
domain-controller-flags = pdc gc ldap ds kdc timeserv closest writable good-timeserv full-secret ads-web
domain-controller-usable = yes
domain-controllers = SHAREKHANDC.sskikt_nt.com jollyboard-adc.sskikt_nt.com sknewadc.sskikt_nt.com dradc.sskikt_nt.com RIL-ADC.sskikt_nt.com RUBY-DOMAIN.sskikt_nt.com rubyadc.sskikt_nt.com jb-adc.sskikt_nt.com
[computer]
computer-site = Default-First-Site-Name

#### join in Active Directory Domain ####
# adcli join --user=linuxadmin sskikt_nt.com
Password for linuxadmin@SSKIKT_NT.COM:          ----- AD's Administrator password

#### create new File ####
# vim /etc/sssd/sssd.conf
[sssd]
domains = sskikt_nt.com  ---- add domain name
config_file_version = 2
services = nss, pam

[domain/sskikt_nt.com] ---- Add Domain Name
ad_domain = sskikt_nt.com --- Add Domain Name
krb5_realm = SSKIKT_NT.COM --- Add Domain Name
realmd_tags = manages-system joined-with-samba
cache_credentials = True
id_provider = ad
krb5_store_password_if_offline = True
default_shell = /bin/bash
ldap_id_mapping = True
use_fully_qualified_names = False
fallback_homedir = /home/%d/%u
access_provider = ad

#### Change permission of file ####
# chmod 600 /etc/sssd/sssd.conf 

#### add follows to the end (generate home directory if not)
# vim /etc/pam.d/system-auth

session     optional      pam_mkhomedir.so skel=/etc/skel umask=077

#### start sssd service ####
# service sssd start

#### start after boot#####
# chkconfig sssd on

#### make sure it's possible to get an AD user info or not ####
# id rajendra.unisource

#### make sure it's possible to switch to an AD user or not
# su - rajendra.unisource ----- Must be login.

#### Add group for administration previlages ####
# groupadd sugroup

#### Add domain user in sugroup group ####
# gpasswd -M rajendra.unisource@sskikt_nt.com,nukul.hinger@sskikt_nt.com,shakir.khan@sskikt_nt.com,paresh.gijam@sskikt_nt.com,pradip.prajapati@sskikt_nt.com sugroup

#### Add below lines in /etc/sudoers file #####
# visudo  
## Allow access for su users.
Cmnd_Alias SU = /bin/su
%sugroup        ALL=SU



